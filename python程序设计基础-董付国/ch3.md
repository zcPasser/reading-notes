# 第3章：python序列结构

## 3.1：列表-数组

- 自动进行内存管理。
- 尽量从列表的尾部进行元素的追加和删除。
- 基于值的内存管理模式，变量存储值的引用或内存地址。
  - python中变量随时改变类型的原因。
  - 列表中元素也是值的引用，故各元素可以是不同类型的数据。
- 功能强大，但开销大。
- 列表创建
  - l = []
  - list()
    - 可以把可迭代对象（元组、字符串、集合）转为列表。
    - 而对应字典时默认将字典的“键”转为列表。
- 列表删除:del l
- 元素访问
  - 整数下标，0开始。
  - 支持负整数。
- 常用方法

| 方法                            | 说明                                                         |
| ------------------------------- | ------------------------------------------------------------ |
| extend                          | 将列表1添加到列表2尾部。                                     |
| insert(index, x)                |                                                              |
| remove(x)                       | 删除列表中第一个值=x的元素，剩余元素前移。<br />不存在则异常。 |
| clear                           | 清空列表。                                                   |
| reverse                         | 原地逆序，首尾交换。                                         |
| copy                            | 列表浅复制。<br />新列表对象，但元素的引用不变。             |
| sort(key=None, reverse = False) | 默认原地升序。                                               |

- 复制
  - 赋值
    - 同一个列表赋值给2个不同对象
      - 2个变量相互独立，修改1个不会影响另一个。
    - 列表赋值给1个变量，再将该变量赋值给另一个变量
      - 会相互影响。
  - 复制
    - 浅复制
      - 新瓶装旧酒。
    - 深复制
      - 新瓶装新酒——2个变量相互独立。
- 运算符
  - +
  - *
- 列表推导式。
  - 嵌套列表。
    - 矩阵。
  - 过滤元素。
  - 文件对象迭代。
- 切片
  - [start: end: step]
    - [::-1]——返回逆序列表。
  - 删除元素。
    - l[ : 3] = []
  - 添加元素——用相关函数即可。
    - 原地操作。
    - 尾部增加：l[len(l) : ] = [5]，append即可。
    - 头部增加：l[: 0] = [1, 2]
  - 切片得到 浅复制。

## 3.2：元组-轻量级列表

- 一个元素时，加逗号。
- 支持双向索引访问元素。
- 属于不可变序列。
  - 不可以直接修改元组中元素的值。
  - 无法为元组增加或删除元素。
  - 一定程度上，认为元素是常量列表。
  - 更安全，如可以作为参数传递。
  - 作为不可变序列，元组同整数、字符串相同，可以作为字典的键，也可作为集合的元素（可哈希，内置函数hash）。而列表永远不能作为字典键使用，也不能作为集合元素。
- 访问速度快于列表。
  - 适用于只对常量值序列遍历之类操作。
- 生成器推导式。
  - 类似列表推导式，但以圆括号作为定界符。
  - 结果是1个生成器对象，类似迭代器对象，具有惰性求值特点。
    - 使用时可以将其转为列表或元组，可以使用next遍历。
    - 只能从前往后正向单次访问元素，不支持下标访问。

## 3.3：字典

- 创建
  - dict()
  - ={}
  - dict(zip(k, v))
  - =dict.fromkeys(['name', 'age'])      //以给定内容为键，创建值为空的字典。
- 访问
  - 下标访问，加上条件判断 或者 异常处理结构。
  - get方法。

- 增添改
  - 添加
    - dict1.update(dict2)，类似列表的extend。
    - setdefault，添加新元素。
  - 删除
    - pop
    - popitem
- 标准库collections相关类
  - OrderDict类
    - 记住元素插入顺序。——有序字典。
  - defaultdict类
    - 频次统计。
  - Counter类
    - 频次统计，且更快捷、功能更强大。

## 3.4：集合

- 元素必须可哈希，即数字、字符串、元组等不可变类型。
- 可以对序列（元素可哈希）去重。
- 查找快捷；in 成员测试快。

## 3.5：序列解包

- 多个变量同时赋值。
  - 赋值来源可以是迭代器对象、列表字符串等序列对象。
- 同时遍历序列。
- *运算符
  - 搜集剩余多个数值。

## 习题

- 3.1、从列表尾部增删。

从中间进行操作需要对剩余元素操作，开销大。

- 3.2、range返回

迭代对象、range对象。

- 3.3、程序
  - 生成包含1000个0~100之间的随机整数。
  - 统计每个元素出现次数。

```python
import random
nums_list = [random.randint(0, 100) for i in range(1000)]
for num in nums_list:
    
    
```

- 3.4、false
- 3.5、程序
  - 输入：1个列表，2个整数下标。
  - 输出：切片获取2个下标之间的元素子列表。

```python
nums_list = [int(s) for s in input('请输入列表元素：').split()]
a, b = input('请输入2个整数下标：').split()
sub_nums_list = nums_list[int(a): int(b) + 1]
print(sub_nums_list)
```

- 3.6、None
- 3.7、index
- 3.8、[6, 7, 9, 11]
- 3.10、程序
  - 生成20个随机数的列表。
  - 前10个元素升序排列，后10个降序排列。
  - 输出。

```python
import random

nums_list = [random.randint(0, 10) for i in range(20)]
print(nums_list)
nums_list = sorted(nums_list[:10]) + sorted(nums_list[10:], reverse=True)

print(nums_list)
```

- 3.13、dict(zip(a, b))
- 3.14、b = [a[i] for i in range(len(a)) if i%3 == 0]

**b = a[::3]**

- 3.15、a = [5] * 10
- 3.16、不可以。——元组不可变，不可增删改。